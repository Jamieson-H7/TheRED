<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>insert title here</title>

    <meta property="og:title" content="The Ruby E-Institute of Dreams">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://theredencryption.github.io/online-learning-site">
    <meta property="og:image" content="">
    <meta property="og:description"
        content="Play! Learn! Explore! The only limit is your imagination, welcome to TheRED!">
    <script src="js/generator.js"></script>
    <script src="js/redirects.js"></script>
    <script defer type="module" src="js/authy.js"></script>
</head>

<body>
    Something has gone terribly wrong. Check the url, lmao. <br>
    <script type="module">
        import { getStorage, ref as sRef, listAll, list, getDownloadURL, getBytes } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-storage.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-auth.js";
        import { marked } from "https://cdn.jsdelivr.net/npm/marked/lib/marked.esm.js";

        // Get a reference to the storage service, which is used to create references in your storage bucket
        const storage = getStorage();


        const auth = getAuth();
        onAuthStateChanged(auth, (user) => {
            if (user) {
                // User is signed in, see docs for a list of available properties
                // https://firebase.google.com/docs/reference/js/auth.user
                const uid = user.uid;
                // ...
            } else {
                // User is signed out
                // ...
            }
        });
        try {
            document.body.innerHTML += window.location.toString().substring(window.location.origin.length + "/online-learning-site/".length);
        } catch (error) {
            alert(error);
        }
        let courseTitle = window.location.toString().substring(window.location.origin.length + "/online-learning-site/".length).split("/")[1];
        console.log(courseTitle)
        let listRef = sRef(storage, "courses/" + courseTitle)
        listAll(listRef)
            .then((res) => {
                // console.log(res.items)
                // console.log(res.prefixes)
                res.prefixes.forEach((folderRef) => {
                    console.log(folderRef)
                });
            }).catch((error) => {
                // Uh-oh, an error occurred!
                console.error(error)
            });
    </script>
</body>

</html>